@echo off
chcp 65001 >nul
echo ========================================
echo    Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚
echo ========================================
echo.

REM Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ù„ÙŠ
for /f "tokens=2 delims==" %%I in ('wmic os get localdatetime /value') do set datetime=%%I
set TODAY=%datetime:~0,4%-%datetime:~4,2%-%datetime:~6,2%

echo ðŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: %TODAY%
echo.

REM Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ø¬Ù„Ø¯ backups
if not exist "backups" (
    echo ðŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ backups...
    mkdir backups
)

echo ðŸ”„ Ø¬Ø§Ø±ÙŠ Ø¹Ù…Ù„ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...
echo.

REM ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
node backup-firestore.js

if %ERRORLEVEL% EQU 0 (
    echo.
    echo ========================================
    echo âœ… ØªÙ…Øª Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!
    echo ========================================
    echo.
    echo ðŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹: backups\firestore-%TODAY%
    echo.
    echo ðŸ’¡ Ù†ØµÙŠØ­Ø©: Ù„Ø§ ØªÙ†Ø³ÙŽ Ù†Ø³Ø® Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
    echo    Ø¥Ù„Ù‰ Ù‡Ø§Ø±Ø¯ Ø®Ø§Ø±Ø¬ÙŠ Ø£Ùˆ Ø®Ø¯Ù…Ø© Ø³Ø­Ø§Ø¨ÙŠØ©!
    echo.
) else (
    echo.
    echo ========================================
    echo âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ!
    echo ========================================
    echo.
    echo ØªØ£ÙƒØ¯ Ù…Ù†:
    echo 1. ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù .env.local
    echo 2. Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
    echo 3. ØµÙ„Ø§Ø­ÙŠØ§Øª Firestore
    echo.
)

echo Ø§Ø¶ØºØ· Ø£ÙŠ Ø²Ø± Ù„Ù„Ø¥ØºÙ„Ø§Ù‚...
pause >nul
